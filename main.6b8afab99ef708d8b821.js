(()=>{"use strict";var t={13:(t,e,n)=>{n.r(e)},278:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default={primary:"#2563eb",background:"#e5e5e5"}},533:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});const i=n(818);e.default=class{constructor(t){this.rotationAnimationId=null,this.fillAnimationId=null,this.currentValue=0,this.currentRotation=0,this.canvas=t;const e=t.getContext("2d");if(!e)throw new Error("Canvas 2D context not supported");this.context=e,this.setupCanvas()}setupCanvas(){const t=(i.DEFAULT_CONFIG.RADIUS+i.DEFAULT_CONFIG.STROKE_WIDTH)*i.CANVAS_SETTINGS.SIZE_MULTIPLIER,e=window.devicePixelRatio||i.CANVAS_SETTINGS.DEFAULT_DPR;this.canvas.width=t*e,this.canvas.height=t*e,this.canvas.style.width=`${t}px`,this.canvas.style.height=`${t}px`,this.context.scale(e,e),this.context.lineCap=i.CANVAS_SETTINGS.LINE_CAP}draw(){const t=(i.DEFAULT_CONFIG.RADIUS+i.DEFAULT_CONFIG.STROKE_WIDTH)*i.CANVAS_SETTINGS.SIZE_MULTIPLIER,e=t/i.CANVAS_SETTINGS.SIZE_MULTIPLIER;this.context.clearRect(0,0,t,t),this.context.save(),this.context.translate(e,e),this.context.rotate(this.currentRotation),this.context.translate(-e,-e),this.drawTrack(e),this.currentValue>i.VALUE_BOUNDS.MIN&&this.drawProgress(e,this.currentValue),this.context.restore()}drawTrack(t){this.context.beginPath(),this.context.arc(t,t,i.DEFAULT_CONFIG.RADIUS,0,i.MATH_CONSTANTS.FULL_CIRCLE),this.context.strokeStyle=i.DEFAULT_CONFIG.TRACK_COLOR,this.context.lineWidth=i.DEFAULT_CONFIG.STROKE_WIDTH,this.context.stroke()}drawProgress(t,e){const n=i.MATH_CONSTANTS.START_ANGLE,a=n+e/i.VALUE_BOUNDS.MAX*i.MATH_CONSTANTS.FULL_CIRCLE;this.context.beginPath(),this.context.arc(t,t,i.DEFAULT_CONFIG.RADIUS,n,a),this.context.strokeStyle=i.DEFAULT_CONFIG.FILL_COLOR,this.context.lineWidth=i.DEFAULT_CONFIG.STROKE_WIDTH,this.context.stroke()}animateValue(t,e=i.ANIMATION_SETTINGS.FILL_DURATION){this.stopFillAnimation();const n=Date.now(),a=this.currentValue,s=t-a,r=()=>{const t=Date.now()-n,i=Math.min(t/e,1),o=1-(1-i)**3;this.currentValue=a+s*o,this.draw(),this.fillAnimationId=i<1?requestAnimationFrame(r):null};this.fillAnimationId=requestAnimationFrame(r)}startRotationAnimation(){if(this.rotationAnimationId)return;const t=i.DEFAULT_CONFIG.ANIMATION_DURATION*i.ANIMATION_SETTINGS.MILLISECONDS_IN_SECOND,e=Date.now(),n=()=>{const a=(Date.now()-e)%t/t;this.currentRotation=a*i.MATH_CONSTANTS.FULL_CIRCLE,this.draw(),this.rotationAnimationId=requestAnimationFrame(n)};this.rotationAnimationId=requestAnimationFrame(n)}stopRotationAnimation(){this.rotationAnimationId&&(cancelAnimationFrame(this.rotationAnimationId),this.rotationAnimationId=null),this.currentRotation=0,this.draw()}stopFillAnimation(){this.fillAnimationId&&(cancelAnimationFrame(this.fillAnimationId),this.fillAnimationId=null)}stopAllAnimations(){this.stopRotationAnimation(),this.stopFillAnimation()}updateValue(t,e=!0){const n=Math.max(i.VALUE_BOUNDS.MIN,Math.min(i.VALUE_BOUNDS.MAX,t));this.currentValue!==n&&(e?this.animateValue(n):(this.stopFillAnimation(),this.currentValue=n,this.draw()))}destroy(){this.stopAllAnimations()}}},624:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(n(757)),s=i(n(533)),r=n(880),o=n(818);class l extends a.default{constructor(t={}){super(),this.renderer=null,this.changeCallback=null,this.state={value:o.DEFAULT_STATE.VALUE,animated:o.DEFAULT_STATE.ANIMATED,hidden:o.DEFAULT_STATE.HIDDEN,...t}}createElement(){const t=(0,r.createProgressContainer)(),e=(0,r.createProgressCanvas)();return t.append(e),this.renderer=new s.default(e),this.renderer.updateValue(this.state.value,!1),this.toggleClass("progress-hidden",this.state.hidden),this.toggleClass("progress-animated",this.state.animated),this.state.animated&&!this.state.hidden&&this.renderer.startRotationAnimation(),t}setValue(t,e=!0){const n=Math.max(o.VALUE_BOUNDS.MIN,Math.min(o.VALUE_BOUNDS.MAX,t));this.state.value!==n&&(this.state.value=n,this.renderer&&this.renderer.updateValue(n,e),this.notifyChange())}setAnimated(t){this.state.animated!==t&&(this.state.animated=t,this.toggleClass("progress-animated",t),this.renderer&&(t&&!this.state.hidden?this.renderer.startRotationAnimation():this.renderer.stopRotationAnimation()),this.notifyChange())}setHidden(t){this.state.hidden!==t&&(this.state.hidden=t,this.toggleClass("progress-hidden",t),this.renderer&&(t?this.renderer.stopAllAnimations():this.state.animated&&this.renderer.startRotationAnimation()),this.notifyChange())}getValue(){return this.state.value}isAnimated(){return this.state.animated}isHidden(){return this.state.hidden}getState(){return{...this.state}}setState(t){void 0!==t.value&&this.setValue(t.value),void 0!==t.animated&&this.setAnimated(t.animated),void 0!==t.hidden&&this.setHidden(t.hidden)}onStateChange(t){this.changeCallback=t}notifyChange(){this.changeCallback&&this.changeCallback(this.getState())}destroy(){this.renderer&&(this.renderer.destroy(),this.renderer=null),this.changeCallback=null,super.destroy()}}e.default=l},757:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.element=null}addClass(t){this.element?.classList.add(t)}removeClass(t){this.element?.classList.remove(t)}toggleClass(t,e){this.element?.classList.toggle(t,e)}render(){return this.element||(this.element=this.createElement()),this.element}destroy(){this.element?.remove(),this.element=null}}},818:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ANIMATION_SETTINGS=e.CANVAS_SETTINGS=e.MATH_CONSTANTS=e.VALUE_BOUNDS=e.DEFAULT_STATE=e.DEFAULT_CONFIG=void 0;const a=i(n(278));e.DEFAULT_CONFIG={RADIUS:50,STROKE_WIDTH:8,FILL_COLOR:a.default.primary,TRACK_COLOR:a.default.background,ANIMATION_DURATION:2},e.DEFAULT_STATE={VALUE:0,ANIMATED:!1,HIDDEN:!1},e.VALUE_BOUNDS={MIN:0,MAX:100},e.MATH_CONSTANTS={FULL_CIRCLE:2*Math.PI,HALF_CIRCLE:Math.PI,QUARTER_CIRCLE:Math.PI/2,START_ANGLE:-Math.PI/2},e.CANVAS_SETTINGS={DEFAULT_DPR:1,LINE_CAP:"round",SIZE_MULTIPLIER:2},e.ANIMATION_SETTINGS={MILLISECONDS_IN_SECOND:1e3,DESTROY_VALUE:0,FILL_DURATION:800}},821:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(n(938));n(13),document.addEventListener("DOMContentLoaded",(()=>{new a.default}))},880:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createControlLabel=e.createControlWrapper=e.createNumberInput=e.createToggleSwitch=e.createProgressCanvas=e.createProgressContainer=e.createElement=void 0,e.createElement=(t,e=[],n={},i)=>{const a=document.createElement(t);return a.classList.add(...e),Object.entries(n).forEach((([t,e])=>a.setAttribute(t,e))),i&&(a.textContent=i),a},e.createProgressContainer=()=>(0,e.createElement)("div",["progress-wrapper"]),e.createProgressCanvas=()=>(0,e.createElement)("canvas",["progress-circle"]),e.createToggleSwitch=(t,n=!1)=>{const i=n?["toggle-switch","active"]:["toggle-switch"],a=(0,e.createElement)("div",i,{id:t,role:"switch","aria-checked":n.toString()}),s=(0,e.createElement)("div",["toggle-slider"]);return a.append(s),a},e.createNumberInput=(t,n,i=0,a=100)=>(0,e.createElement)("input",["value-input"],{type:"number",id:t,min:i.toString(),max:a.toString(),value:n.toString()}),e.createControlWrapper=t=>{const n=(0,e.createElement)("div",["control-input"]);return n.append(t),n},e.createControlLabel=t=>{const n=(0,e.createElement)("label",["control-label"]);return n.textContent=t,n}},938:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(n(624)),s=n(880),r=n(818);e.default=class{constructor(){this.boundUpdateOrientation=this.updateOrientation.bind(this),this.boundHandleOrientationChange=this.boundUpdateOrientation,this.container=this.createAppContainer(),this.progress=new a.default({value:25}),this.render(),this.setupProgressListener(),this.setupEventListeners(),this.updateOrientation()}createAppContainer(){const t=(0,s.createElement)("div",["app-container"]);return document.body.append(t),t}render(){this.orientationLabel=(0,s.createElement)("div",["orientation-label"],{},"Portrait");const t=(0,s.createElement)("div",["header"]),e=(0,s.createElement)("h1",[],{},"Progress"),n=(0,s.createElement)("div",["progress-section"]);n.append(this.progress.render());const i=this.createControls(),a=(0,s.createElement)("div",["main-wrapper"]);t.append(e),a.append(n,i),this.container.append(this.orientationLabel,t,a)}setupProgressListener(){this.progress.onStateChange((t=>{this.valueInput.value=t.value.toString(),this.updateToggle(this.animateToggle,t.animated),this.updateToggle(this.hideToggle,t.hidden)}))}createControls(){const t=(0,s.createElement)("div",["controls"]),e=(0,s.createElement)("div",["controls-grid"]);this.valueInput=(0,s.createNumberInput)("valueInput",this.progress.getValue(),r.VALUE_BOUNDS.MIN,r.VALUE_BOUNDS.MAX),this.animateToggle=(0,s.createToggleSwitch)("animateToggle",this.progress.isAnimated()),this.hideToggle=(0,s.createToggleSwitch)("hideToggle",this.progress.isHidden());const n=(0,s.createControlLabel)("Value"),i=(0,s.createControlLabel)("Animate"),a=(0,s.createControlLabel)("Hide"),o=(0,s.createControlWrapper)(this.valueInput),l=(0,s.createControlWrapper)(this.animateToggle),d=(0,s.createControlWrapper)(this.hideToggle);return e.append(o,n,l,i,d,a),t.append(e),t}setupEventListeners(){this.valueInput.addEventListener("input",(t=>{const{target:e}=t;if(!(e instanceof HTMLInputElement))return;let n=Number.parseInt(e.value,10)||0;n=Math.max(r.VALUE_BOUNDS.MIN,Math.min(r.VALUE_BOUNDS.MAX,n)),e.value=n.toString(),this.progress.setValue(n)})),this.animateToggle.addEventListener("click",(()=>{const t=!this.progress.isAnimated();this.progress.setAnimated(t)})),this.hideToggle.addEventListener("click",(()=>{const t=!this.progress.isHidden();this.progress.setHidden(t)})),window.addEventListener("orientationchange",this.boundHandleOrientationChange),window.addEventListener("resize",this.boundUpdateOrientation)}updateToggle(t,e){t.classList.toggle("active",e),t instanceof HTMLButtonElement&&t.setAttribute("aria-pressed",e.toString())}updateOrientation(){const t=window.matchMedia("(orientation: landscape)").matches;this.orientationLabel.textContent=t?"Landscape":"Portrait"}destroy(){window.removeEventListener("resize",this.boundUpdateOrientation),window.removeEventListener("orientationchange",this.boundHandleOrientationChange),this.progress.destroy(),this.container.parentNode&&this.container.remove()}}}},e={};function n(i){var a=e[i];if(void 0!==a)return a.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,n),s.exports}n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(821)})();